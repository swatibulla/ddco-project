<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Decode & Discover ‚Äî Escape Room</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Orbitron', sans-serif;
  background: linear-gradient(120deg, #0b1220, #1a1f2c);
  color: #e6f7ff;
  text-align: center;
  padding: 20px;
  background-image: url('https://images.unsplash.com/photo-1557682224-5b8590cd9ec5?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w5NzF8MHwxfGFsbHwxfHxjb2RlJTIwY29kZXxlbnwwfHx8fDE2OTk4NDYxMzk&ixlib=rb-4.0.3&q=80&w=1080');
  background-size: cover;
  background-attachment: fixed;
}

.container {
  max-width: 900px;
  margin: 20px auto;
  padding: 30px;
  background: rgba(10, 18, 32, 0.85);
  border-radius: 16px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.7);
  backdrop-filter: blur(5px);
}

h1 {
  font-family: 'Press Start 2P', cursive;
  color: #00f0a0;
  font-size: 2em;
  margin-bottom: 10px;
}

h2 {
  color: #7be3ff;
}

#welcome {
  font-size: 18px;
  margin-bottom: 15px;
  color: #ffd75f;
  font-style: italic;
}

#instructions {
  font-size: 16px;
  color: #cfeee7;
  margin-bottom: 20px;
  line-height: 1.5;
  text-align: left;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  background: rgba(255,255,255,0.02);
  padding: 12px;
  border-radius: 8px;
}

#timer { font-size: 18px; color: #ffda79; margin-bottom: 12px; }
#puzzle-area { background: rgba(255,255,255,0.02); padding: 18px; border-radius: 8px; }
#puzzle-image { margin: 12px auto; max-width: 100%; display: none; }
#imageDesc { display: none; color:#d1f7ff; background: rgba(255,255,255,0.02); padding:10px; border-radius:6px; margin:8px 0; }
input#answer { padding: 10px; width: 70%; border-radius: 6px; border: 1px solid #2b6b88; background: rgba(255,255,255,0.02); color: #e6f7ff; }
button { padding: 10px 16px; margin-left: 8px; border-radius: 6px; border: none; background: linear-gradient(90deg,#00c9ff,#00f0a0); color: #002; font-weight: 700; cursor: pointer; }
#hint { color: #ffcf6a; margin-top: 10px; }
#feedback { margin-top: 10px; color: #ff9aa2; }

</style>
</head>
<body>
<div class="container">
  <h1>üîê Decode & Discover</h1>
  <div id="welcome">Welcome to Decode & Discover ‚Äî your mind, your clues, your escape!</div>
  <div id="instructions">
    <strong>Instructions:</strong>
    <ul>
      <li>There are 20 doors/puzzles to unlock, divided into Stage 1 (simple riddles) and Stage 2 (image-based challenges).</li>
      <li>You have 15 minutes to complete all doors.</li>
      <li>Type your answer in the box and click Submit.</li>
      <li>You have 3 attempts per puzzle; after 2 wrong attempts, a hint will appear.</li>
      <li>Think carefully ‚Äî logic, patterns, and observation are key!</li>
    </ul>
  </div>

  <div id="timer">Time Left: 15:00</div>

  <div id="puzzle-area">
    <h2 id="puzzle-title">Door 1</h2>
    <p id="puzzle-text"></p>
    <img id="puzzle-image" />
    <div id="imageDesc">Image: <span id="imgText"></span></div>
    <div id="hint" style="display:none"></div>
    <input id="answer" placeholder="Type your answer here" />
    <button onclick="checkAnswer()">Submit</button>
    <div id="feedback"></div>
  </div>
</div>

<script>
// ----------------- JS logic stays the same as your current script -----------------
const puzzles = [
  // Stage 1 & Stage 2 puzzles from your current code
  // (Copy existing puzzles array here)
];

let current = 0;
let attempts = 0;
let totalTime = 15 * 60;

function normalize(ans){ return String(ans).trim().toLowerCase().replace(/\s+/g,''); }

function startTimer(){
  const el = document.getElementById('timer');
  const tick = setInterval(()=>{
    if(totalTime <= 0){ el.textContent='Time Left: 00:00'; alert('Time up ‚Äî game over'); clearInterval(tick); return; }
    totalTime--;
    const m = Math.floor(totalTime/60), s = totalTime%60;
    el.textContent = Time Left: ${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')};
  },1000);
}

function loadPuzzle(){
  const p = puzzles[current];
  document.getElementById('puzzle-title').textContent = Door ${current+1};
  document.getElementById('puzzle-text').textContent = p.q;
  document.getElementById('hint').style.display='none';
  document.getElementById('feedback').textContent='';
  document.getElementById('answer').value='';

  if(p.imgDesc){
    document.getElementById('imageDesc').style.display='block';
    document.getElementById('imgText').textContent=p.imgDesc;
  } else { document.getElementById('imageDesc').style.display='none'; }

  attempts=0;
}

function checkAnswer(){
  const user=normalize(document.getElementById('answer').value);
  const correct=normalize(puzzles[current].a);
  if(!user){ alert('Enter an answer'); return; }
  attempts++;
  if(user===correct){
    document.getElementById('feedback').textContent='‚úÖ Correct ‚Äî moving to next door.';
    setTimeout(()=>{ nextPuzzle(); },900);
    return;
  }
  if(attempts===2){
    document.getElementById('hint').style.display='block';
    document.getElementById('hint').textContent='Hint: '+puzzles[current].hint;
    document.getElementById('feedback').textContent='‚ùå Incorrect ‚Äî one more try.';
  } else if(attempts>=3){
    document.getElementById('feedback').textContent=‚ùå Incorrect ‚Äî correct: ${puzzles[current].a}. Proceeding...;
    setTimeout(()=>{ nextPuzzle(); },1200);
  } else {
    document.getElementById('feedback').textContent='‚ùå Incorrect ‚Äî try again.';
  }
}

function nextPuzzle(){
  current++;
  if(current>=puzzles.length){
    document.getElementById('puzzle-title').textContent='üéâ ESCAPE COMPLETE!';
    document.getElementById('puzzle-text').textContent='You completed all doors ‚Äî well done!';
    document.getElementById('imageDesc').style.display='none';
    document.getElementById('hint').style.display='none';
    document.getElementById('answer').style.display='none';
    return;
  }
  loadPuzzle();
}

startTimer();
loadPuzzle();
</script>
</body>
</html>