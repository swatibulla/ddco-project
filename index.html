<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>DDCO Escape Room ‚Äî Stage 1 & 2</title>
<style>
body { font-family: Arial, sans-serif; background: #0b1220; color: #e6f7ff; text-align: center; padding: 20px; }
.container { max-width: 820px; margin: 12px auto; padding: 20px; background: linear-gradient(180deg,#071020,#0f1b2b); border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.6); }
h1 { color: #7be3ff; }
#timer { font-size: 18px; color: #ffda79; margin-bottom: 12px; }
#puzzle-area { background: rgba(255,255,255,0.02); padding: 18px; border-radius: 8px; }
#puzzle-image { margin: 12px auto; max-width: 100%; color: #cfeee7; font-style: italic; }
input#answer { padding: 10px; width: 70%; border-radius: 6px; border: 1px solid #2b6b88; background: rgba(255,255,255,0.02); color: #e6f7ff; }
button { padding: 10px 16px; margin-left: 8px; border-radius: 6px; border: none; background: linear-gradient(90deg,#00c9ff,#00f0a0); color: #002; font-weight: 700; cursor: pointer; }
#hint { color: #ffcf6a; margin-top: 10px; }
#feedback { margin-top: 10px; color: #ff9aa2; }
</style>
</head>
<body>
<div class="container">
  <h1>üîê DDCO Escape Room ‚Äî Stage 1 & 2</h1>
  <div id="timer">Time Left: 15:00</div>
  <div id="puzzle-area">
    <h2 id="puzzle-title">Door 1</h2>
    <p id="puzzle-text"></p>
    <div id="puzzle-image" style="display:none;"></div>
    <div id="imageDesc" style="display:none; color:#d1f7ff; background: rgba(255,255,255,0.02); padding:10px; border-radius:6px; margin:8px 0;">Image: <span id="imgText"></span></div>
    <div id="hint" style="display:none"></div>
    <input id="answer" placeholder="Type your answer here" />
    <button onclick="checkAnswer()">Submit</button>
    <div id="feedback"></div>
  </div>
</div>

<script>
// Puzzles 1..20 (Stage1: 1-10 simple riddles; Stage2: 11-20 image based descriptions)
const puzzles = [
  { q: "NOT(OR(0,1,0)) = ?", a: "0", hint: "OR gives 1 if any input is 1" },
  { q: "Decimal value of 1011?", a: "11", hint: "8 + 0 + 2 + 1" },
  { q: "A full adder has how many inputs?", a: "3", hint: "A, B and carry-in" },
  { q: "I open only when every switch is ON. What am I?", a: "and", hint: "All inputs must be 1" },
  { q: "If two inputs differ I output 1. Who am I?", a: "xor", hint: "Exclusive OR" },
  { q: "I speak only when both are silent. Who am I?", a: "nor", hint: "Opposite of OR" },
  { q: "Where do C programs begin?", a: "main", hint: "It's the entry function" },
  { q: "I call myself until the work is done. What is this?", a: "recursion", hint: "Function that calls itself" },
  { q: "I end the program instantly. Which command?", a: "exit(0)", hint: "Common in C" },
  { q: "I change one data type into another. What am I?", a: "type casting", hint: "(int) or (float) etc." },

  // Stage-2 begins here (image-based ‚Äî descriptions are used instead of actual images)

  // 11 ‚Äî Shape Rotation (updated earlier)
  { q: "(Image) A square rotated 45¬∞ (diamond) has a small dot in its top corner. The square is rotated 90¬∞ clockwise. Where is the dot now?", a: "right corner", hint: "Track the corner as the shape rotates clockwise.", imgDesc: "A square shown as a diamond; a small dot sits at the top corner. Next frame shows the square rotated 90¬∞ clockwise." },

  // 12 ‚Äî Broken Clock (kept)
  { q: "(Image) A clock shows minute hand at 12 and hour hand exactly between 3 and 4. What time is it?", a: "3:30", hint: "Hour hand moves between hour marks as minutes pass.", imgDesc: "Analogue clock: minute hand at 12, hour hand halfway between 3 and 4." },

  // 13 ‚Äî Tougher pattern bingo (now ask for 6)
  { q: "(Image) Pattern mapping shown: 2 ‚Üí 6, 3 ‚Üí 12, 4 ‚Üí 20, 5 ‚Üí 30. What is the output for 6?", a: "42", hint: "Each output equals n √ó (n + 1). For 6: 6√ó7 = 42.", imgDesc: "A small table showing inputs and outputs as above." },

  // 14 ‚Äî Odd One Out (Animals) (kept)
  { q: "(Image) Four animals shown: dog, cat, mouse, frog. Which is odd one out?", a: "frog", hint: "Three are mammals.", imgDesc: "Icons: dog, cat, mouse, frog in a row." },

  // 15 ‚Äî Battery Levels (kept)
  { q: "(Image) Three batteries shown: 100%, 70%, 40%. A phone shows same level as the last battery. What percent is the phone?", a: "40%", hint: "It matches the last battery shown.", imgDesc: "Three battery icons with percentages; phone shows unknown matching last icon." },

  // 16 ‚Äî CODE SNIPPET (changed topic & type) ‚Äî image-based code
  { q: "(Image) A small code snippet image: `printf(\"%d\", 3 + 4 * 2);` ‚Äî What prints?", a: "11", hint: "Multiplication before addition.", imgDesc: "Screenshot of a tiny C code snippet: printf(\"%d\", 3 + 4 * 2);" },

  // 17 ‚Äî Missing Domino (kept)
  { q: "(Image) Tiles: [2|5], [5|8], [8|11]. What is the first number of third tile? (shown as ?|11)", a: "8", hint: "Numbers chain: end of previous is start of next.", imgDesc: "Row of three dominos showing the numbers above." },

  // 18 ‚Äî Which Cup Fills First? (kept)
  { q: "(Image) Three connected cups; top pipe to Cup1 is blocked, flow goes to Cup2 then Cup3. Which cup fills first?", a: "cup 2", hint: "Follow open paths only.", imgDesc: "Schematic of cups connected vertically; first pipe blocked." },

  // 19 ‚Äî LOGIC CIRCUIT (changed topic & type)
  { q: "(Image) A half-adder diagram image with inputs A=1 and B=1. What is the SUM output?", a: "0", hint: "Sum is A XOR B (1‚äï1 = 0).", imgDesc: "Simple half-adder block with inputs labelled A and B and outputs Sum and Carry." },

  // 20 ‚Äî OPTICAL ILLUSION (changed topic & type)
  { q: "(Image) Two horizontal lines of equal length are shown with arrows at ends making one look longer. Which is longer?", a: "both equal", hint: "It's an illusion; measure to confirm.", imgDesc: "Classic M√ºller-Lyer style illusion: two equal lines with arrowheads making them appear different lengths." }
];

let current = 0;
let attempts = 0;
let totalTime = 15 * 60; // seconds

function normalize(ans){ return String(ans).trim().toLowerCase(); }

function startTimer(){
  const el = document.getElementById('timer');
  const tick = setInterval(()=>{
    if (totalTime <= 0){ el.textContent = 'Time Left: 00:00'; alert('Time up ‚Äî game over'); clearInterval(tick); return; }
    totalTime--;
    const m = Math.floor(totalTime/60), s = totalTime%60;
    el.textContent = `Time Left: ${m}:${String(s).padStart(2,'0')}`;
  }, 1000);
}

function loadPuzzle(){
  const p = puzzles[current];
  document.getElementById('puzzle-title').textContent = `Door ${current+1}`;
  document.getElementById('puzzle-text').textContent = p.q;
  document.getElementById('hint').style.display = 'none';
  document.getElementById('feedback').textContent = '';
  document.getElementById('answer').value = '';
  // image description handling
  if (p.imgDesc){
    document.getElementById('imageDesc').style.display = 'block';
    document.getElementById('imgText').textContent = p.imgDesc;
  } else {
    document.getElementById('imageDesc').style.display = 'none';
    document.getElementById('imgText').textContent = '';
  }
  attempts = 0;
}

function checkAnswer(){
  const user = normalize(document.getElementById('answer').value);
  const correct = normalize(puzzles[current].a);
  if (!user){ alert('Enter an answer'); return; }
  attempts++;
  if (user === correct){
    document.getElementById('feedback').textContent = '‚úÖ Correct ‚Äî moving to next door.';
    setTimeout(()=>{ nextPuzzle(); }, 900);
    return;
  }
  // wrong answer handling
  if (attempts === 2){
    document.getElementById('hint').style.display = 'block';
    document.getElementById('hint').textContent = 'Hint: ' + puzzles[current].hint;
    document.getElementById('feedback').textContent = '‚ùå Incorrect ‚Äî one more try.';
  } else if (attempts >= 3){
    document.getElementById('feedback').textContent = `‚ùå Incorrect ‚Äî correct: ${puzzles[current].a}. Proceeding...`;
    setTimeout(()=>{ nextPuzzle(); }, 1200);
  } else {
    document.getElementById('feedback').textContent = '‚ùå Incorrect ‚Äî try again.';
  }
}

function nextPuzzle(){
  current++;
  if (current >= puzzles.length){
    document.getElementById('puzzle-title').textContent = 'üéâ ESCAPE COMPLETE!';
    document.getElementById('puzzle-text').textContent = 'You completed all doors ‚Äî well done!';
    document.getElementById('imageDesc').style.display = 'none';
    document.getElementById('hint').style.display = 'none';
    document.getElementById('answer').style.display = 'none';
    return;
  }
  loadPuzzle();
}

// start
startTimer();
loadPuzzle();
</script>
</body>
</html>